# admin/config.yml

# Use DecapBridge auth (required for non-Netlify hosting)
backend:
  name: git-gateway
  repo: Trinkie/my-site-cms
  branch: main

  # PKCE flow (no client_secret stored in repo)
  auth_type: pkce

  # DecapBridge endpoints (site-specific)
  base_url: https://auth.decapbridge.com
  auth_endpoint: /sites/450c18ac-7bc9-4a39-8bbc-f66612f5e87b/pkce
  auth_token_endpoint: /sites/450c18ac-7bc9-4a39-8bbc-f66612f5e87b/token
  gateway_url: https://gateway.decapbridge.com

media_folder: "images/uploads"
public_folder: "/images/uploads"

collections:
  - name: "data"
    label: "Данные"
    files:
      - name: "filament"
        label: "Филамент"
        file: "content/filament.json"
        format: "json"
        fields:
          - label: "Позиции"
            name: "items"
            widget: "list"
            fields:
              - { label: "Название", name: "title", widget: "string" }
              - { label: "Картинка", name: "image", widget: "image", required: false }
              - { label: "В наличии", name: "in_stock", widget: "boolean", default: true }
              - { label: "Описание", name: "description", widget: "text", required: false }
